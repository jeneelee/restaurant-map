<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>ëª¨ë‘ì˜ë§›ì§‘ ì§€ë„</title>

  <style>
    #map {
      height: 80vh;
      width: 100%;
    }
    .buttons {
      padding: 10px;
    }
    button {
      padding: 8px 12px;
      margin-right: 10px;
      cursor: pointer;
    }
  </style>

  <!-- ğŸ” ì—¬ê¸° Client ID ì§ì ‘ ì…ë ¥ -->
  <script
  type="text/javascript"
  src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=â˜…â˜…â˜…â˜…â˜…â˜…Client IDâ˜…â˜…â˜…â˜…â˜…â˜…">
</script>




  
</head>
<body>

<h2>ëª¨ë‘ì˜ë§›ì§‘! ì§€ë„</h2>

<div class="buttons">
  <button onclick="showBySource('ë¯¸ìŠë­')">ë¯¸ìŠë­</button>
  <button onclick="showBySource('ë§›ìˆëŠ”ë…€ì„ë“¤')">ë§›ìˆëŠ”ë…€ì„ë“¤</button>
</div>

<div id="map"></div>

<script>
var map;
var markers = [];
var allData = [];

// âœ… ì§€ë„ ì´ˆê¸°í™”
function initMap() {
  map = new naver.maps.Map('map', {
    center: new naver.maps.LatLng(37.5665, 126.9780),
    zoom: 12
  });

  // ğŸ”¥ êµ¬ê¸€ì‹œíŠ¸ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
  fetch("https://opensheet.elk.sh/1zNSdIdZeJuUrD56NbYCdby7QGfoRMC-WzGsLHjpKLlo/ì‹œíŠ¸1")
    .then(response => response.json())
    .then(data => {
      allData = data;
      console.log("ë°ì´í„° ë¡œë“œ ì™„ë£Œ:", allData);
    })
    .catch(error => {
      console.error("ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", error);
    });
}

// âœ… ë§ˆì»¤ ì œê±°
function clearMarkers() {
  markers.forEach(m => m.setMap(null));
  markers = [];
}

// âœ… ë²„íŠ¼ í•„í„° ê¸°ëŠ¥
function showBySource(type) {
  clearMarkers();

  var filtered = allData.filter(item => item.source === type);

  filtered.forEach(place => {

    var marker = new naver.maps.Marker({
      position: new naver.maps.LatLng(
        parseFloat(place.lat),
        parseFloat(place.lng)
      ),
      map: map,
      title: place.name
    });

    var infoWindow = new naver.maps.InfoWindow({
      content: `
        <div style="padding:10px;">
          <strong>${place.name}</strong><br>
          ì¶œì²˜: ${place.source}
        </div>
      `
    });

    naver.maps.Event.addListener(marker, "click", function() {
      infoWindow.open(map, marker);
    });

    markers.push(marker);
  });
}

// í˜ì´ì§€ ë¡œë“œë˜ë©´ ì§€ë„ ì‹¤í–‰
window.onload = initMap;

</script>

</body>
</html>
