<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>ë§›ì§‘ ì§€ë„</title>
  <style>
    #map {
      height: 80vh;
      width: 100%;
    }
    .buttons {
      padding: 10px;
    }
    button {
      padding: 8px 12px;
      margin-right: 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<h2>ë§›ì§‘ ì§€ë„</h2>

<div class="buttons">
  <button onclick="showBySource('ë¯¸ìŠë­')">ë¯¸ìŠë­</button>
  <button onclick="showBySource('ë§›ìˆëŠ”ë…€ì„ë“¤')">ë§›ìˆëŠ”ë…€ì„ë“¤</button>
</div>

<div id="map"></div>

<script>
var map;
var markers = [];
var allData = [];

function initMap() {
  var center = { lat: 37.5665, lng: 126.9780 };

  map = new google.maps.Map(document.getElementById("map"), {
    zoom: 12,
    center: center
  });

  // ğŸ”¥ğŸ”¥ğŸ”¥ ì—¬ê¸°ë§Œ ìˆ˜ì •í•˜ë©´ ë¨
  fetch("https://opensheet.elk.sh/1zNSdIdZeJuUrD56NbYCdby7QGfoRMC-WzGsLHjpKLlo/ì‹œíŠ¸1")
    .then(response => response.json())
    .then(data => {
      allData = data;
      console.log("ë°ì´í„° ë¡œë“œ ì™„ë£Œ:", allData);
    })
    .catch(error => {
      console.error("ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", error);
    });
}

function clearMarkers() {
  markers.forEach(m => m.setMap(null));
  markers = [];
}

function showBySource(type) {
  clearMarkers();

  var filtered = allData.filter(item => item.source === type);

  filtered.forEach(place => {
    var marker = new google.maps.Marker({
      position: {
        lat: parseFloat(place.lat),
        lng: parseFloat(place.lng)
      },
      map: map,
      title: place.name
    });

    markers.push(marker);
  });
}
</script>

<script async
src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap">
</script>

</body>
</html>
